(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();class p{SIZE=15;CELL=40;OFFSET=20;grid=Array.from({length:15},()=>Array(15).fill(0));anims=[];reset(){this.grid=Array.from({length:15},()=>Array(15).fill(0)),this.anims=[]}place(e,t,i){return this.grid[t]?.[e]!==0?!1:(this.grid[t][e]=i,this.anims.push({x:e,y:t,r:2}),!0)}draw(e){e.clearRect(0,0,640,640),e.strokeStyle="rgba(0,0,0,0.6)";for(let t=0;t<15;t++)e.beginPath(),e.moveTo(this.OFFSET,this.OFFSET+t*this.CELL),e.lineTo(this.OFFSET+14*this.CELL,this.OFFSET+t*this.CELL),e.stroke(),e.beginPath(),e.moveTo(this.OFFSET+t*this.CELL,this.OFFSET),e.lineTo(this.OFFSET+t*this.CELL,this.OFFSET+14*this.CELL),e.stroke();for(let t=0;t<15;t++)for(let i=0;i<15;i++)this.grid[t][i]&&this.drawStone(e,i,t,this.grid[t][i],16,!1);for(let t=this.anims.length-1;t>=0;t--){const i=this.anims[t];i.r+=2.5,this.drawStone(e,i.x,i.y,this.grid[i.y][i.x],i.r,!0),i.r>=16&&this.anims.splice(t,1)}}drawStone(e,t,i,s,r,o){e.beginPath(),e.arc(this.OFFSET+t*this.CELL,this.OFFSET+i*this.CELL,r,0,Math.PI*2),o&&(e.shadowColor="rgba(0,0,0,0.6)",e.shadowBlur=14,e.shadowOffsetY=4),e.fillStyle=s===1?"#111":"#f9f9f9",e.fill(),e.shadowBlur=0}checkWin(e,t,i){const s=[[1,0],[0,1],[1,1],[1,-1]];for(const[r,o]of s){let f=1;for(const n of[1,-1]){let c=e+r*n,d=t+o*n;for(;this.grid[d]?.[c]===i;)f++,c+=r*n,d+=o*n}if(f>=5)return!0}return!1}}function O(l){let e=[7,7],t=-1;const i=[[1,0],[0,1],[1,1],[1,-1]],s=(r,o,f)=>{let n=0;for(const[c,d]of i){let h=1;for(const u of[1,-1]){let E=r+c*u,F=o+d*u;for(;l[F]?.[E]===f;)h++,E+=c*u,F+=d*u}h>=5?n+=1e5:h===4?n+=1e4:h===3&&(n+=1e3)}return n};for(let r=0;r<15;r++)for(let o=0;o<15;o++){if(l[r][o]!==0)continue;const f=s(o,r,2)+s(o,r,1)*1.1;f>t&&(t=f,e=[o,r])}return e}const m=document.getElementById("board"),S=m.getContext("2d"),y=document.getElementById("status"),C=document.getElementById("restart");let a=new p,g=!1;function L(){a.draw(S),requestAnimationFrame(L)}L();m.onclick=l=>{if(g)return;const e=m.getBoundingClientRect(),t=Math.round((l.clientX-e.left-20)/40),i=Math.round((l.clientY-e.top-20)/40);if(!a.place(t,i,1))return;if(a.checkWin(t,i,1)){y.textContent="ðŸŽ‰ ä½ èµ¢äº†ï¼",g=!0;return}const[s,r]=O(a.grid);a.place(s,r,2),a.checkWin(s,r,2)&&(y.textContent="ðŸ¤– AI èµ¢äº†",g=!0)};C.onclick=()=>{a.reset(),g=!1,y.textContent="è½®åˆ°ä½ ï¼ˆé»‘æ£‹ï¼‰"};
